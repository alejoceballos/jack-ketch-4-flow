package somossuinos.jackketch.transform;

import org.junit.Assert;
import org.junit.Before;
import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.ExpectedException;
import somossuinos.jackketch.transform.violet.VltWorkflow;

public class XmlToVioletTransformerTest {

    @Rule
    public ExpectedException thrown = ExpectedException.none();

    private static final String XML =
        new StringBuilder()
            .append("<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\" ?>                               ")
            .append("<ActivityDiagramGraph id=\"1\">                                                             ")
            .append("    <nodes id=\"2\">                                                                        ")
            .append("        <ScenarioStartNode id=\"3\">                                                        ")
            .append("            <children id=\"4\"/>                                                            ")
            .append("            <location class=\"Point2D.Double\" id=\"5\" x=\"780.0\" y=\"140.0\"/>           ")
            .append("            <id id=\"6\" value=\"727995c5-a419-4b19-a035-d68f3073be74\"/>                   ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor id=\"7\">                                                      ")
            .append("                <red>255</red>                                                              ")
            .append("                <green>255</green>                                                          ")
            .append("                <blue>255</blue>                                                            ")
            .append("                <alpha>255</alpha>                                                          ")
            .append("            </backgroundColor>                                                              ")
            .append("            <borderColor id=\"8\">                                                          ")
            .append("                <red>0</red>                                                                ")
            .append("                <green>0</green>                                                            ")
            .append("                <blue>0</blue>                                                              ")
            .append("                <alpha>255</alpha>                                                          ")
            .append("            </borderColor>                                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("        </ScenarioStartNode>                                                                ")
            .append("        <SynchronizationBarNode id=\"9\">                                                   ")
            .append("            <children id=\"10\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"11\" x=\"648.0\" y=\"210.0\"/>          ")
            .append("            <id id=\"12\" value=\"eda0107e-1f45-45a0-b0f9-578a9a624260\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("        </SynchronizationBarNode>                                                           ")
            .append("        <ActivityNode id=\"13\">                                                            ")
            .append("            <children id=\"14\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"15\" x=\"660.0\" y=\"270.0\"/>          ")
            .append("            <id id=\"16\" value=\"6f6aabb4-b073-4290-b303-5f9f0cd25fa7\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("            <name id=\"17\" justification=\"1\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>x = 1 + 1</text>                                                      ")
            .append("            </name>                                                                         ")
            .append("        </ActivityNode>                                                                     ")
            .append("        <ActivityNode id=\"18\">                                                            ")
            .append("            <children id=\"19\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"20\" x=\"840.0\" y=\"270.0\"/>          ")
            .append("            <id id=\"21\" value=\"f768f0b0-beee-413c-b998-258e8ae81cc7\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("            <name id=\"22\" justification=\"1\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>y = 1 * 1</text>                                                      ")
            .append("            </name>                                                                         ")
            .append("        </ActivityNode>                                                                     ")
            .append("        <SynchronizationBarNode id=\"23\">                                                  ")
            .append("            <children id=\"24\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"25\" x=\"648.0\" y=\"390.0\"/>          ")
            .append("            <id id=\"26\" value=\"935482ce-a20d-45fa-ba5d-c9cdfa6a348e\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("        </SynchronizationBarNode>                                                           ")
            .append("        <ActivityNode id=\"27\">                                                            ")
            .append("            <children id=\"28\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"29\" x=\"750.0\" y=\"460.0\"/>          ")
            .append("            <id id=\"30\" value=\"fc05a717-8385-4e54-bfd1-30e4f030eb10\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("            <name id=\"31\" justification=\"1\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>v = x + y</text>                                                      ")
            .append("            </name>                                                                         ")
            .append("        </ActivityNode>                                                                     ")
            .append("        <DecisionNode id=\"32\">                                                            ")
            .append("            <children id=\"33\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"34\" x=\"750.0\" y=\"590.0\"/>          ")
            .append("            <id id=\"35\" value=\"f69f1f43-5e22-4036-8b9d-72c1b9ceb391\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("            <condition id=\"36\" justification=\"1\" size=\"4\" underlined=\"false\">       ")
            .append("                <text></text>                                                               ")
            .append("            </condition>                                                                    ")
            .append("        </DecisionNode>                                                                     ")
            .append("        <ActivityNode id=\"37\">                                                            ")
            .append("            <children id=\"38\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"39\" x=\"660.0\" y=\"690.0\"/>          ")
            .append("            <id id=\"40\" value=\"858e6795-aa8f-48f3-b90a-3131a91959de\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("            <name id=\"41\" justification=\"1\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>Ok</text>                                                             ")
            .append("            </name>                                                                         ")
            .append("        </ActivityNode>                                                                     ")
            .append("        <ActivityNode id=\"42\">                                                            ")
            .append("            <children id=\"43\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"44\" x=\"840.0\" y=\"690.0\"/>          ")
            .append("            <id id=\"45\" value=\"a73b7d7d-d825-451c-86a2-8fdbc44d7d3e\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("            <name id=\"46\" justification=\"1\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>Not Ok</text>                                                         ")
            .append("            </name>                                                                         ")
            .append("        </ActivityNode>                                                                     ")
            .append("        <ScenarioEndNode id=\"47\">                                                         ")
            .append("            <children id=\"48\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"49\" x=\"780.0\" y=\"910.0\"/>          ")
            .append("            <id id=\"50\" value=\"3e50ddfa-ea7a-4a0e-be65-7455702bed49\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"7\"/>                                              ")
            .append("            <borderColor reference=\"8\"/>                                                  ")
            .append("            <textColor reference=\"8\"/>                                                    ")
            .append("        </ScenarioEndNode>                                                                  ")
            .append("        <NoteNode id=\"51\">                                                                ")
            .append("            <children id=\"52\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"53\" x=\"950.0\" y=\"240.0\"/>          ")
            .append("            <id id=\"54\" value=\"c62d3638-1eec-410f-965c-97de8f9424b2\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor id=\"55\">                                                     ")
            .append("                <red>255</red>                                                              ")
            .append("                <green>255</green>                                                          ")
            .append("                <blue>255</blue>                                                            ")
            .append("                <alpha>255</alpha>                                                          ")
            .append("            </backgroundColor>                                                              ")
            .append("            <borderColor id=\"56\">                                                         ")
            .append("                <red>0</red>                                                                ")
            .append("                <green>0</green>                                                            ")
            .append("                <blue>0</blue>                                                              ")
            .append("                <alpha>255</alpha>                                                          ")
            .append("            </borderColor>                                                                  ")
            .append("            <textColor reference=\"56\"/>                                                   ")
            .append("            <text id=\"57\" justification=\"0\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>{                                                                     ")
            .append("                    &quot;comment&quot;: &quot;Will sum multiply 1 * 1&quot;,               ")
            .append("                    &quot;package&quot;: &quot;somossuinos.jackketch.transform.violet&quot;,")
            .append("                    &quot;class&quot;: &quot;SimpleDiagram&quot;,                           ")
            .append("                    &quot;method&quot;: &quot;multiplyOneByOne&quot;                        ")
            .append("                    }</text>                                                                ")
            .append("            </text>                                                                         ")
            .append("            <color id=\"58\">                                                               ")
            .append("                <red>255</red>                                                              ")
            .append("                <green>228</green>                                                          ")
            .append("                <blue>181</blue>                                                            ")
            .append("                <alpha>255</alpha>                                                          ")
            .append("            </color>                                                                        ")
            .append("        </NoteNode>                                                                         ")
            .append("        <NoteNode id=\"59\">                                                                ")
            .append("            <children id=\"60\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"61\" x=\"270.0\" y=\"240.0\"/>          ")
            .append("            <id id=\"62\" value=\"be30b589-d550-492b-b362-07d937f7dab7\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"55\"/>                                             ")
            .append("            <borderColor reference=\"56\"/>                                                 ")
            .append("            <textColor reference=\"56\"/>                                                   ")
            .append("            <text id=\"63\" justification=\"0\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>{                                                                     ")
            .append("                    &quot;comment&quot;: &quot;Will sum 1 + 1&quot;,                        ")
            .append("                    &quot;package&quot;: &quot;somossuinos.jackketch.transform.violet&quot;,")
            .append("                    &quot;class&quot;: &quot;SimpleDiagram&quot;,                           ")
            .append("                    &quot;method&quot;: &quot;sumOnePlusOne&quot;                           ")
            .append("                    }</text>                                                                ")
            .append("            </text>                                                                         ")
            .append("            <color id=\"64\">                                                               ")
            .append("                <red>255</red>                                                              ")
            .append("                <green>239</green>                                                          ")
            .append("                <blue>213</blue>                                                            ")
            .append("                <alpha>255</alpha>                                                          ")
            .append("            </color>                                                                        ")
            .append("        </NoteNode>                                                                         ")
            .append("        <NoteNode id=\"65\">                                                                ")
            .append("            <children id=\"66\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"67\" x=\"950.0\" y=\"430.0\"/>          ")
            .append("            <id id=\"68\" value=\"19c09a1e-d1ab-4a95-8051-f06debd348af\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"55\"/>                                             ")
            .append("            <borderColor reference=\"56\"/>                                                 ")
            .append("            <textColor reference=\"56\"/>                                                   ")
            .append("            <text id=\"69\" justification=\"0\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>{                                                                     ")
            .append("                    &quot;comment&quot;: &quot;Will sum both results&quot;,                 ")
            .append("                    &quot;package&quot;: &quot;somossuinos.jackketch.transform.violet&quot;,")
            .append("                    &quot;class&quot;: &quot;SimpleDiagram&quot;,                           ")
            .append("                    &quot;method&quot;: &quot;sumXPlusY&quot;                               ")
            .append("                    }</text>                                                                ")
            .append("            </text>                                                                         ")
            .append("            <color reference=\"58\"/>                                                       ")
            .append("        </NoteNode>                                                                         ")
            .append("        <NoteNode id=\"70\">                                                                ")
            .append("            <children id=\"71\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"72\" x=\"270.0\" y=\"660.0\"/>          ")
            .append("            <id id=\"73\" value=\"7e9060b5-e651-48de-85ed-64909b4cc84e\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"55\"/>                                             ")
            .append("            <borderColor reference=\"56\"/>                                                 ")
            .append("            <textColor reference=\"56\"/>                                                   ")
            .append("            <text id=\"74\" justification=\"0\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>{                                                                     ")
            .append("                    &quot;comment&quot;: &quot;Will save okay in the context&quot;,         ")
            .append("                    &quot;package&quot;: &quot;somossuinos.jackketch.transform.violet&quot;,")
            .append("                    &quot;class&quot;: &quot;SimpleDiagram&quot;,                           ")
            .append("                    &quot;method&quot;: &quot;showOk&quot;                                  ")
            .append("                    }</text>                                                                ")
            .append("            </text>                                                                         ")
            .append("            <color reference=\"58\"/>                                                       ")
            .append("        </NoteNode>                                                                         ")
            .append("        <NoteNode id=\"75\">                                                                ")
            .append("            <children id=\"76\"/>                                                           ")
            .append("            <location class=\"Point2D.Double\" id=\"77\" x=\"950.0\" y=\"660.0\"/>          ")
            .append("            <id id=\"78\" value=\"c6957c93-9ec3-4411-921c-83cd18cb853b\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <backgroundColor reference=\"55\"/>                                             ")
            .append("            <borderColor reference=\"56\"/>                                                 ")
            .append("            <textColor reference=\"56\"/>                                                   ")
            .append("            <text id=\"79\" justification=\"0\" size=\"4\" underlined=\"false\">            ")
            .append("                <text>{                                                                     ")
            .append("                    &quot;comment&quot;: &quot;Will save not okay in the context&quot;,     ")
            .append("                    &quot;package&quot;: &quot;somossuinos.jackketch.transform.violet&quot;,")
            .append("                    &quot;class&quot;: &quot;SimpleDiagram&quot;,                           ")
            .append("                    &quot;method&quot;: &quot;showNotOk&quot;                               ")
            .append("                    }</text>                                                                ")
            .append("            </text>                                                                         ")
            .append("            <color reference=\"58\"/>                                                       ")
            .append("        </NoteNode>                                                                         ")
            .append("    </nodes>                                                                                ")
            .append("    <edges id=\"80\">                                                                       ")
            .append("        <ActivityTransitionEdge id=\"81\">                                                  ")
            .append("            <start class=\"ScenarioStartNode\" reference=\"3\"/>                            ")
            .append("            <end class=\"SynchronizationBarNode\" reference=\"9\"/>                         ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"82\" x=\"10.0\" y=\"10.0\"/>       ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"83\" x=\"50.0\" y=\"0.0\"/>          ")
            .append("            <transitionPoints id=\"84\"/>                                                   ")
            .append("            <id id=\"85\" value=\"735cfe1e-4e6b-42c2-bb0b-74af16463361\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"86\">                                                  ")
            .append("            <start class=\"SynchronizationBarNode\" reference=\"9\"/>                       ")
            .append("            <end class=\"ActivityNode\" reference=\"13\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"87\" x=\"22.0\" y=\"0.0\"/>        ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"88\" x=\"40.0\" y=\"20.0\"/>         ")
            .append("            <transitionPoints id=\"89\"/>                                                   ")
            .append("            <id id=\"90\" value=\"f475eb75-9954-4ef7-ad14-76c4e8d762a0\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"91\">                                                  ")
            .append("            <start class=\"SynchronizationBarNode\" reference=\"9\"/>                       ")
            .append("            <end class=\"ActivityNode\" reference=\"18\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"92\" x=\"192.0\" y=\"0.0\"/>       ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"93\" x=\"60.0\" y=\"20.0\"/>         ")
            .append("            <transitionPoints id=\"94\"/>                                                   ")
            .append("            <id id=\"95\" value=\"14f6bc3b-a0ea-439c-b934-67ee80381d54\"/>                  ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"96\">                                                  ")
            .append("            <start class=\"ActivityNode\" reference=\"13\"/>                                ")
            .append("            <end class=\"SynchronizationBarNode\" reference=\"23\"/>                        ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"97\" x=\"60.0\" y=\"40.0\"/>       ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"98\" x=\"60.0\" y=\"0.0\"/>          ")
            .append("            <transitionPoints id=\"99\"/>                                                   ")
            .append("            <id id=\"100\" value=\"aa210d30-05ca-4198-93fd-b32e751a9f6a\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"101\">                                                 ")
            .append("            <start class=\"ActivityNode\" reference=\"18\"/>                                ")
            .append("            <end class=\"SynchronizationBarNode\" reference=\"23\"/>                        ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"102\" x=\"40.0\" y=\"40.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"103\" x=\"52.0\" y=\"0.0\"/>         ")
            .append("            <transitionPoints id=\"104\"/>                                                  ")
            .append("            <id id=\"105\" value=\"98daa777-7cd0-4473-ba71-7a97de25d5e3\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"106\">                                                 ")
            .append("            <start class=\"SynchronizationBarNode\" reference=\"23\"/>                      ")
            .append("            <end class=\"ActivityNode\" reference=\"27\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"107\" x=\"202.0\" y=\"0.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"108\" x=\"40.0\" y=\"30.0\"/>        ")
            .append("            <transitionPoints id=\"109\"/>                                                  ")
            .append("            <id id=\"110\" value=\"fa76b600-fb83-47cc-b10c-df4d7bca69d2\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"111\">                                                 ")
            .append("            <start class=\"ActivityNode\" reference=\"27\"/>                                ")
            .append("            <end class=\"DecisionNode\" reference=\"32\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"112\" x=\"30.0\" y=\"30.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"113\" x=\"40.0\" y=\"10.0\"/>        ")
            .append("            <transitionPoints id=\"114\"/>                                                  ")
            .append("            <id id=\"115\" value=\"a59c585e-6c65-493a-ac69-dad104f8db2b\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"116\">                                                 ")
            .append("            <start class=\"DecisionNode\" reference=\"32\"/>                                ")
            .append("            <end class=\"ActivityNode\" reference=\"37\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"117\" x=\"30.0\" y=\"20.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"118\" x=\"30.0\" y=\"40.0\"/>        ")
            .append("            <transitionPoints id=\"119\"/>                                                  ")
            .append("            <id id=\"120\" value=\"0c3e9b5b-9234-4927-a5b8-f910ac55d710\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"HV\"/>                                                        ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel>v &lt;= 6</middleLabel>                                            ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"121\">                                                 ")
            .append("            <start class=\"DecisionNode\" reference=\"32\"/>                                ")
            .append("            <end class=\"ActivityNode\" reference=\"42\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"122\" x=\"40.0\" y=\"20.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"123\" x=\"50.0\" y=\"30.0\"/>        ")
            .append("            <transitionPoints id=\"124\"/>                                                  ")
            .append("            <id id=\"125\" value=\"0e97cd98-8e17-4ed3-ba6d-89edb313765c\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"HV\"/>                                                        ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel>otherwise</middleLabel>                                            ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"126\">                                                 ")
            .append("            <start class=\"ActivityNode\" reference=\"37\"/>                                ")
            .append("            <end class=\"ScenarioEndNode\" reference=\"47\"/>                               ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"127\" x=\"50.0\" y=\"50.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"128\" x=\"10.0\" y=\"10.0\"/>        ")
            .append("            <transitionPoints id=\"129\"/>                                                  ")
            .append("            <id id=\"130\" value=\"b8e2ecd0-3d51-48b8-aebb-41b0c9c4b909\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <ActivityTransitionEdge id=\"131\">                                                 ")
            .append("            <start class=\"ActivityNode\" reference=\"42\"/>                                ")
            .append("            <end class=\"ScenarioEndNode\" reference=\"47\"/>                               ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"132\" x=\"20.0\" y=\"40.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"133\" x=\"10.0\" y=\"10.0\"/>        ")
            .append("            <transitionPoints id=\"134\"/>                                                  ")
            .append("            <id id=\"135\" value=\"5d666f63-65aa-4a8b-a1c8-f5fcd7e18657\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("            <lineStyle name=\"SOLID\"/>                                                     ")
            .append("            <startArrowHead name=\"NONE\"/>                                                 ")
            .append("            <bentStyle name=\"AUTO\"/>                                                      ")
            .append("            <startLabel></startLabel>                                                       ")
            .append("            <middleLabel></middleLabel>                                                     ")
            .append("            <endLabel></endLabel>                                                           ")
            .append("        </ActivityTransitionEdge>                                                           ")
            .append("        <NoteEdge id=\"136\">                                                               ")
            .append("            <start class=\"NoteNode\" reference=\"51\"/>                                    ")
            .append("            <end class=\"ActivityNode\" reference=\"18\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"137\" x=\"10.0\" y=\"20.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"138\" x=\"50.0\" y=\"30.0\"/>        ")
            .append("            <transitionPoints id=\"139\"/>                                                  ")
            .append("            <id id=\"140\" value=\"1b1f97c5-5092-41a1-8fc5-3039cbea55c8\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("        </NoteEdge>                                                                         ")
            .append("        <NoteEdge id=\"141\">                                                               ")
            .append("            <start class=\"NoteNode\" reference=\"59\"/>                                    ")
            .append("            <end class=\"ActivityNode\" reference=\"13\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"142\" x=\"40.0\" y=\"20.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"143\" x=\"30.0\" y=\"30.0\"/>        ")
            .append("            <transitionPoints id=\"144\"/>                                                  ")
            .append("            <id id=\"145\" value=\"de6ff169-91e2-4a7d-abba-f87478bfb416\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("        </NoteEdge>                                                                         ")
            .append("        <NoteEdge id=\"146\">                                                               ")
            .append("            <start class=\"NoteNode\" reference=\"65\"/>                                    ")
            .append("            <end class=\"ActivityNode\" reference=\"27\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"147\" x=\"30.0\" y=\"20.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"148\" x=\"50.0\" y=\"30.0\"/>        ")
            .append("            <transitionPoints id=\"149\"/>                                                  ")
            .append("            <id id=\"150\" value=\"93c5fae6-6b24-4a7c-8d66-79d304010cf8\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("        </NoteEdge>                                                                         ")
            .append("        <NoteEdge id=\"151\">                                                               ")
            .append("            <start class=\"NoteNode\" reference=\"70\"/>                                    ")
            .append("            <end class=\"ActivityNode\" reference=\"37\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"152\" x=\"40.0\" y=\"20.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"153\" x=\"40.0\" y=\"30.0\"/>        ")
            .append("            <transitionPoints id=\"154\"/>                                                  ")
            .append("            <id id=\"155\" value=\"c840562f-2530-449a-b285-814c71e4152d\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("        </NoteEdge>                                                                         ")
            .append("        <NoteEdge id=\"156\">                                                               ")
            .append("            <start class=\"NoteNode\" reference=\"75\"/>                                    ")
            .append("            <end class=\"ActivityNode\" reference=\"42\"/>                                  ")
            .append("            <startLocation class=\"Point2D.Double\" id=\"157\" x=\"20.0\" y=\"20.0\"/>      ")
            .append("            <endLocation class=\"Point2D.Double\" id=\"158\" x=\"50.0\" y=\"20.0\"/>        ")
            .append("            <transitionPoints id=\"159\"/>                                                  ")
            .append("            <id id=\"160\" value=\"5478ad41-3a98-43a5-b97b-23fa8cabab92\"/>                 ")
            .append("            <revision>1</revision>                                                          ")
            .append("        </NoteEdge>                                                                         ")
            .append("    </edges>                                                                                ")
            .append("</ActivityDiagramGraph>                                                                     ")
            .toString();


    private static final Jk4flowTransformer<String, VltWorkflow> TRANSFORMER = new XmlToVioletTransformer();


    private VltWorkflow workflow;

    @Before
    public void before() {
        this.workflow = TRANSFORMER.transform(XML);
    }

    @Test
    public void testTransform_Null_Xml_Fail() {
        thrown.expect(RuntimeException.class);
        thrown.expectMessage("XML should not be blank");

        TRANSFORMER.transform(null);
    }

    @Test
    public void testTransform_Blank_Xml_Fail() {
        thrown.expect(RuntimeException.class);
        thrown.expectMessage("XML should not be blank");

        TRANSFORMER.transform(" ");
    }

    @Test
    public void testTransform_Not_Null() {
        Assert.assertNotNull(workflow);
    }

    @Test
    public void testTransform_Validate_Workflow() {
        Assert.assertTrue(workflow.validate());
    }

    @Test
    public void testTransform_Validate_Nodes() {
        Assert.assertTrue(workflow.getNodes().validate());
    }

    @Test
    public void testTransform_Validate_Edges() {
        Assert.assertTrue(workflow.getEdges().validate());
    }

    @Test
    public void testTransform_ScenarioStartNode() {
        Assert.assertEquals(1, workflow.getNodes().getScenarioStartNodes().size());
    }

    @Test
    public void testTransform_SynchronizationBarNode() {
        Assert.assertEquals(2, workflow.getNodes().getSynchronizationBarNodes().size());
    }

    @Test
    public void testTransform_ActivityNode() {
        Assert.assertEquals(5, workflow.getNodes().getActivityNodes().size());
    }

    @Test
    public void testTransform_DecisionNode() {
        Assert.assertEquals(1, workflow.getNodes().getDecisionNodes().size());
    }

    @Test
    public void testTransform_NoteNode() {
        Assert.assertEquals(5, workflow.getNodes().getNoteNodes().size());
    }

    @Test
    public void testTransform_ScenarioEndNode() {
        Assert.assertEquals(1, workflow.getNodes().getScenarioEndNodes().size());
    }

}
